(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0a5a1ae","chunk-26c78622","chunk-793a42f3"],{"0326":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("c-page-header"),s("c-page-footer")],1)},n=[],r=s("c896"),o=s("bc6f"),i=s("f176"),u={name:"Layout",components:{Login:r["default"],CPageHeader:o["default"],CPageFooter:i["default"]},data:function(){return{}},activated:function(){},mounted:function(){this.checkUserInfo()},methods:{checkUserInfo:function(){this.$router.push("/index")}}},l=u,c=(s("91b8"),s("2877")),m=Object(c["a"])(l,a,n,!1,null,"84e37fb4",null);t["default"]=m.exports},"0c15":function(e,t,s){"use strict";s("c339")},"0eb0":function(e,t,s){"use strict";s("199a")},"10a0":function(e,t,s){"use strict";s("a4d1")},"199a":function(e,t,s){},"19e2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:menus:add",arg:"sys:menus:add"}],on:{click:function(t){return e.addMenus()}}},[e._v("添加菜单")]),s("a-divider"),s("a-drawer",{attrs:{title:"",width:"50%",visible:e.show.test},on:{close:e.closeMenusForm}},[s("a-form-model",{attrs:{model:e.form.menus,rules:e.rules.menus,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[s("a-form-model-item",{attrs:{label:"ID"}},[s("a-input",{attrs:{disabled:"",placeholder:"新建角色时自动生成"},model:{value:e.form.menus.id,callback:function(t){e.$set(e.form.menus,"id",t)},expression:"form.menus.id"}})],1),s("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[s("a-input",{model:{value:e.form.menus.name,callback:function(t){e.$set(e.form.menus,"name",t)},expression:"form.menus.name"}})],1),s("a-form-model-item",{attrs:{label:"菜单"}},[s("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.form.menus.menusType,callback:function(t){e.$set(e.form.menus,"menusType",t)},expression:"form.menus.menusType"}},[s("a-radio",{attrs:{value:1}},[e._v(" A")]),s("a-radio",{attrs:{value:2}},[e._v(" B")]),s("a-radio",{attrs:{value:3}},[e._v(" C")]),s("a-radio",{attrs:{value:4}},[e._v(" D")])],1)],1)],1),s("div",{staticClass:"drawer-bottom-button"},[s("a-button",{style:{marginRight:"8px"},on:{click:e.closeMenusForm}},[e._v("关闭")]),s("a-button",{attrs:{type:"primary"},on:{click:e.submitMenusForm}},[e._v("保存")])],1)],1),s("a-modal",{attrs:{visible:e.show.menus,width:"50%","ok-text":"确认","cancel-text":"取消"},on:{ok:e.submitMenusForm,cancel:e.closeMenusForm}},[s("a-form-model",{attrs:{model:e.form.menus,rules:e.rules.menus,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[s("a-form-model-item",{staticStyle:{display:"none"},attrs:{label:"ID"}},[s("a-input",{attrs:{disabled:"",placeholder:"新建时自动生成"},model:{value:e.form.menus.id,callback:function(t){e.$set(e.form.menus,"id",t)},expression:"form.menus.id"}})],1),s("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[s("a-input",{model:{value:e.form.menus.name,callback:function(t){e.$set(e.form.menus,"name",t)},expression:"form.menus.name"}})],1),1===e.form.menus.menusType?s("a-form-model-item",{attrs:{label:"图标",prop:"icon"}},[s("a-input",{model:{value:e.form.menus.icon,callback:function(t){e.$set(e.form.menus,"icon",t)},expression:"form.menus.icon"}})],1):e._e(),1===e.form.menus.menusType?s("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[s("a-input-number",{attrs:{min:0,max:9999},model:{value:e.form.menus.sort,callback:function(t){e.$set(e.form.menus,"sort",t)},expression:"form.menus.sort"}})],1):e._e(),s("a-form-model-item",{attrs:{label:"类型",prop:"menusType"}},[s("a-radio-group",{attrs:{name:"radioGroup"},model:{value:e.form.menus.menusType,callback:function(t){e.$set(e.form.menus,"menusType",t)},expression:"form.menus.menusType"}},[s("a-radio",{attrs:{value:1}},[s("a-tag",{attrs:{size:"small",color:"green"}},[e._v("菜单")])],1),s("a-radio",{attrs:{value:2}},[s("a-tag",{attrs:{size:"small",color:"blue"}},[e._v("按钮")])],1),s("a-radio",{attrs:{value:3}},[s("a-tag",{attrs:{size:"small",color:"purple"}},[e._v("超链接")])],1)],1)],1),1===e.form.menus.menusType?s("a-form-model-item",{attrs:{label:"浏览器访问路径",prop:"path"}},[s("a-input",{model:{value:e.form.menus.path,callback:function(t){e.$set(e.form.menus,"path",t)},expression:"form.menus.path"}})],1):e._e(),1===e.form.menus.menusType?s("a-form-model-item",{attrs:{label:"文件路径",prop:"filePath"}},[s("a-input",{attrs:{"addon-before":"@/views/","addon-after":".vue"},model:{value:e.form.menus.filePath,callback:function(t){e.$set(e.form.menus,"filePath",t)},expression:"form.menus.filePath"}})],1):e._e(),2===e.form.menus.menusType?s("a-form-model-item",{attrs:{label:"授权标识",prop:"permission"}},[s("a-input",{model:{value:e.form.menus.permission,callback:function(t){e.$set(e.form.menus,"permission",t)},expression:"form.menus.permission"}})],1):e._e()],1),s("div",{staticClass:"drawer-bottom-button"},[s("a-button",{style:{marginRight:"8px"},on:{click:e.closeMenusForm}},[e._v("关闭")]),s("a-button",{attrs:{type:"primary"},on:{click:e.submitMenusForm}},[e._v("保存")])],1)],1),s("a-table",{key:"id",attrs:{"data-source":e.dataSource,columns:e.columns,pagination:e.pagination},scopedSlots:e._u([{key:"action",fn:function(t,a){return s("span",{},[s("c-pop-button",{directives:[{name:"auth",rawName:"v-auth:sys:menus:del",arg:"sys:menus:del"}],attrs:{title:"确定要删除吗",text:"删除",type:"danger"},on:{click:function(t){return e.removeMenus(a)}}}),s("a-divider",{attrs:{type:"vertical"}}),s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:menus:edit",arg:"sys:menus:edit"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editMenus(a)}}},[e._v("编辑")]),1===a.menusType?s("span",[s("a-divider",{attrs:{type:"vertical"}}),s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:menus:add-children",arg:"sys:menus:add-children"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addChildMenus(a)}}},[e._v("添加子菜单")])],1):e._e()],1)}},{key:"icon",fn:function(e,t){return s("span",{},[s("a-icon",{attrs:{type:e.substring(e.indexOf('"')+1,e.lastIndexOf('"'))||"appstore"}})],1)}},{key:"type",fn:function(t,a){return s("span",{},[1===a.menusType?s("a-tag",{attrs:{size:"small",color:"green"}},[e._v("菜单")]):e._e(),2===a.menusType?s("a-tag",{attrs:{size:"small",color:"blue"}},[e._v("按钮")]):e._e(),3===a.menusType?s("a-tag",{attrs:{size:"small",color:"purple"}},[e._v("超链接")]):e._e()],1)}}])})],1)},n=[],r=(s("4e82"),s("d81d"),s("b0c0"),s("99af"),s("4cff")),o=s("f1e3"),i=s("5e05"),u=s("b0fb"),l={name:"menus-list",components:{CPopButton:r["a"]},data:function(){return{labelCol:{span:5},wrapperCol:{span:16},columns:[{dataIndex:"name",title:"名称"},{dataIndex:"icon",title:"图标",scopedSlots:{customRender:"icon"}},{dataIndex:"sort",title:"排序"},{dataIndex:"type",title:"类型",scopedSlots:{customRender:"type"}},{dataIndex:"permission",title:"授权标识"},{dataIndex:"action",title:"操作",scopedSlots:{customRender:"action"}}],dataSource:[],pagination:Object(o["a"])(this.changeIndex,this.changeSize),rules:{menus:{name:[{required:!0,message:"请输入菜单名称",trigger:"change"},{min:2,max:16,message:"长度为2-16个字符",trigger:"change"},{whitespace:!0,message:"请输入菜单名称",trigger:"change"}],menusType:[{required:!0,message:"类型不能为空",trigger:"change"}]}},form:{menus:{id:"",parentId:"",name:"",menusType:"",icon:"",sort:"",path:"",filePath:"",permission:""}},show:{menus:!1,test:!1}}},activated:function(){this.getList()},mounted:function(){},methods:{changeIndex:function(e,t){var s={pageIndex:e,pageSize:t};this.getList(s)},changeSize:function(e,t){var s={pageIndex:e,pageSize:t};this.getList(s)},resetMenusForm:function(){this.form.menus={id:"",parentId:"",name:"",menusType:"",icon:"",sort:"",path:"",filePath:"",permission:""}},refreshData:function(){this.resetMenusForm(),this.getList()},getList:function(e){var t=this;this.$http.get(u["a"].menusListPage,{params:e}).then((function(e){if(200===e.status){if(null!==e.data){var s=function e(t){return t.map((function(t){var s={id:t.id,key:t.id,name:t.name,icon:t.icon,url:t.path,sort:t.sort,menusType:t.menusType,path:t.path,filePath:t.filePath,permission:t.permission};return t.children&&t.children.length>0&&(s.children=e(t.children)),s})).sort((function(e,t){return e.sort-t.sort}))};t.dataSource=s(e.data),t.pagination.total=e.page.dataCount,t.pagination.current=e.page.pageIndex+1}}else t.$message.error(e.message)})).catch((function(e){console.error("出现错误:",e)}))},removeMenus:function(e){var t=this;this.$http.post("".concat(u["a"].delMenus,"/").concat(e.id)).then((function(e){200===e.status?(t.refreshData(),t.$message.success(e.message)):t.$message.error(e.message)})).catch((function(e){console.log("请求出现错误:",e)}))},addMenus:function(){this.show.menus=!0},addChildMenus:function(e){this.form.menus.parentId=e.id,this.show.menus=!0},editMenus:function(e){console.log(e),this.form.menus=e,this.show.menus=!0},closeMenusForm:function(){this.show.menus=!1,this.refreshData(),i["a"].refreshSysData()},submitMenusForm:function(){var e=this;this.$http.post(u["a"].saveMenus,this.form.menus).then((function(t){200===t.status?e.closeMenusForm():e.$message.error(t.message)})).catch((function(e){console.error("出现错误:",e)}))}}},c=l,m=(s("0eb0"),s("2877")),d=Object(m["a"])(c,a,n,!1,null,"12cdd9b7",null);t["default"]=d.exports},"1ccf":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:roles:add",arg:"sys:roles:add"}],on:{click:e.addRoles}},[e._v("添加角色")]),s("a-divider"),s("a-drawer",{attrs:{title:"",width:"50%",visible:e.show.roles},on:{close:e.closeRolesForm}},[s("a-form-model",{attrs:{model:e.form.roles,rules:e.rules.roles,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[s("a-form-model-item",{staticStyle:{display:"none"},attrs:{label:"ID"}},[s("a-input",{attrs:{disabled:"",placeholder:"新建时自动生成"},model:{value:e.form.roles.id,callback:function(t){e.$set(e.form.roles,"id",t)},expression:"form.roles.id"}})],1),s("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[s("a-input",{model:{value:e.form.roles.name,callback:function(t){e.$set(e.form.roles,"name",t)},expression:"form.roles.name"}})],1),s("a-form-model-item",{attrs:{label:"菜单"}},[s("a-tree-select",{attrs:{"tree-data":e.menusOptions,"tree-checkable":"","show-checked-strategy":e.SHOW_TYPE,"show-line":e.show.treeLine,checkStrictly:!1},model:{value:e.form.roles.menusList,callback:function(t){e.$set(e.form.roles,"menusList",t)},expression:"form.roles.menusList"}})],1)],1),s("div",{staticClass:"drawer-bottom-button"},[s("a-button",{style:{marginRight:"8px"},on:{click:e.closeRolesForm}},[e._v("关闭")]),s("a-button",{attrs:{type:"primary"},on:{click:e.submitRolesForm}},[e._v("保存")])],1)],1),s("a-modal",{attrs:{visible:e.show.menus,width:"50%",footer:null},on:{"update:visible":function(t){return e.$set(e.show,"menus",t)},cancel:e.closeShowMenus}},[s("a-table",{key:"id",attrs:{"data-source":e.menusDataSource,columns:e.menusColumns,pagination:!1},scopedSlots:e._u([{key:"icon",fn:function(e,t){return s("span",{},[s("a-icon",{attrs:{type:e.substring(e.indexOf('"')+1,e.lastIndexOf('"'))||"appstore"}})],1)}},{key:"type",fn:function(t,a){return s("span",{},[1===a.menusType?s("a-tag",{attrs:{size:"small",color:"green"}},[e._v("菜单")]):e._e(),2===a.menusType?s("a-tag",{attrs:{size:"small",color:"blue"}},[e._v("按钮")]):e._e(),3===a.menusType?s("a-tag",{attrs:{size:"small",color:"purple"}},[e._v("超链接")]):e._e()],1)}}])})],1),s("a-table",{attrs:{"data-source":e.dataSource,rowKey:"id",columns:e.columns,pagination:e.pagination},scopedSlots:e._u([{key:"action",fn:function(t,a){return s("span",{},[s("c-pop-button",{directives:[{name:"auth",rawName:"v-auth:sys:roles:del",arg:"sys:roles:del"}],attrs:{title:"确定要删除吗",text:"删除",type:"danger",size:"small"},on:{click:function(t){return e.removeRoles(a)}}}),s("a-divider",{attrs:{type:"vertical"}}),s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:roles:edit",arg:"sys:roles:edit"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editRoles(a)}}},[e._v("编辑")]),s("a-divider",{attrs:{type:"vertical"}}),s("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showMenus(a)}}},[e._v("查看菜单")])],1)}}])})],1)},n=[],r=(s("99af"),s("b0c0"),s("d81d"),s("159b"),s("4e82"),s("7bec")),o=s("4cff"),i=s("f1e3"),u=s("5e05"),l=s("b0fb"),c={name:"roles-list",components:{CPopButton:o["a"]},data:function(){return{SHOW_TYPE:r["a"].SHOW_CHILD,labelCol:{span:5},wrapperCol:{span:16},pagination:Object(i["a"])(this.changeIndex,this.changeSize),columns:[{dataIndex:"name",title:"角色",key:"name",width:"50%"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},width:"50%"}],dataSource:[],menusColumns:[{dataIndex:"name",title:"名称"},{dataIndex:"icon",title:"图标",scopedSlots:{customRender:"icon"}},{dataIndex:"sort",title:"排序"},{dataIndex:"type",title:"类型",scopedSlots:{customRender:"type"}}],menusDataSource:[],rules:{roles:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:16,message:"长度为2-16个字符",trigger:"blur"},{whitespace:!0,message:"请输入角色名称",trigger:"blur"}]}},form:{roles:{id:"",name:"",menusList:[]}},show:{treeLine:!0,roles:!1,menus:!1},menusOptions:[]}},activated:function(){this.getList()},mounted:function(){},methods:{changeIndex:function(e,t){var s={pageIndex:e,pageSize:t};this.getList(s)},changeSize:function(e,t){var s={pageIndex:e,pageSize:t};this.getList(s)},resetRolesForm:function(){this.form.roles={id:"",name:"",menusList:[]}},refreshData:function(){this.resetRolesForm(),this.getList()},getList:function(e){var t=this;this.$http.get(l["a"].rolesListPage,{params:e}).then((function(e){200===e.status?null!==e.data&&(t.dataSource=e.data,t.pagination.total=e.page.dataCount,t.pagination.current=e.page.pageIndex+1):t.$message.error(e.message)})).catch((function(e){console.error("出现错误:",e)}))},removeRoles:function(e){var t=this;this.$http.post("".concat(l["a"].delRoles,"/").concat(e.id)).then((function(e){200===e.status?(t.$message.success(e.message),t.refreshData()):t.$message.error(e.message)})).catch((function(e){console.log("请求出现错误:",e)}))},addRoles:function(){this.show.roles=!0,this.getMenusList()},editRoles:function(e){this.form.roles.id=e.id,this.form.roles.name=e.name;var t=[];this.formatDefaultMenusOption(t,e.sysMenus),this.form.roles.menusList=t,this.getMenusList(),this.show.roles=!0},closeRolesForm:function(){this.show.roles=!1,this.refreshData(),u["a"].refreshSysData()},submitRolesForm:function(){var e=this;this.$http.post(l["a"].saveRoles,this.form.roles).then((function(t){200===t.status?e.closeRolesForm():e.$message.error(t.message)})).catch((function(e){console.error("出现错误:",e)}))},getMenusList:function(){var e=this;this.$http.get(l["a"].menusList).then((function(t){200===t.status?(null!==t.data&&(e.menusOptions=t.data),e.menusOptions=e.formatMenusOption(t.data)):e.$message.error(t.message)})).catch((function(e){console.error("出现错误:",e)}))},formatMenusOption:function(e){var t=this;return e.map((function(e){return{title:e.name,value:e.id,key:e.id,children:t.formatMenusOption(e.children)}}))},formatDefaultMenusOption:function(e,t){var s=this;t.forEach((function(t){var a=t.children;a.length>=0&&s.formatDefaultMenusOption(e,a),0===t.delFlag&&e.push(t.id)}))},showMenus:function(e){console.log(e);var t=function e(t){return t.map((function(t){var s={key:t.id,name:t.name,icon:t.icon,url:t.path,sort:t.sort,menusType:t.menusType};return t.children&&t.children.length>0&&(s.children=e(t.children)),s})).sort((function(e,t){return e.sort-t.sort}))};this.menusDataSource=t(e.sysMenus),console.log(this.menusDataSource),this.show.menus=!0},closeShowMenus:function(){this.show.menus=!1}}},m=c,d=(s("0c15"),s("2877")),f=Object(d["a"])(m,a,n,!1,null,"5888c71e",null);t["default"]=f.exports},"3d65":function(e,t,s){},"4cff":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-popconfirm",{attrs:{title:e.title,okText:e.okText,cancelText:e.cancelText,icon:e.icon},on:{confirm:e.confirm}},[s("a-button",{style:e.color,attrs:{type:e.type,size:e.size,icon:e.buttonIcon,loading:e.loading}},[e._v(" "+e._s(e.text))])],1)},n=[],r={name:"c-pop-button",props:{color:{type:Object},click:{type:Function},title:{type:String,default:"按钮"},okText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},text:{type:String,default:"按钮"},size:{type:String,default:"small"},icon:{type:String,default:""},buttonIcon:{type:String,default:""},type:{type:String,default:""},loading:{type:Boolean,default:!1}},watch:{},data:function(){return{}},methods:{confirm:function(){this.$emit("click")}}},o=r,i=s("2877"),u=Object(i["a"])(o,a,n,!1,null,"812e534e",null);t["a"]=u.exports},"51b1":function(e,t,s){"use strict";s("51dd")},"51dd":function(e,t,s){},5358:function(e,t,s){"use strict";s("9c21")},8418:function(e,t,s){"use strict";var a=s("c04e"),n=s("9bf2"),r=s("5c6c");e.exports=function(e,t,s){var o=a(t);o in e?n.f(e,o,r(0,s)):e[o]=s}},"91b8":function(e,t,s){"use strict";s("3d65")},"99af":function(e,t,s){"use strict";var a=s("23e7"),n=s("d039"),r=s("e8b5"),o=s("861d"),i=s("7b0b"),u=s("50c4"),l=s("8418"),c=s("65f0"),m=s("1dde"),d=s("b622"),f=s("2d00"),p=d("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",v=f>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),b=m("concat"),y=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},w=!v||!b;a({target:"Array",proto:!0,forced:w},{concat:function(e){var t,s,a,n,r,o=i(this),m=c(o,0),d=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?o:arguments[t],y(r)){if(n=u(r.length),d+n>h)throw TypeError(g);for(s=0;s<n;s++,d++)s in r&&l(m,d,r[s])}else{if(d>=h)throw TypeError(g);l(m,d++,r)}return m.length=d,m}})},"9c21":function(e,t,s){},a4d1:function(e,t,s){},bb51:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("p",[e._v("hello,world")])])}],r={name:"Home",components:{},mounted:function(){this.$message.success("hello,world",10)}},o=r,i=s("2877"),u=Object(i["a"])(o,a,n,!1,null,null,null);t["default"]=u.exports},bf0e:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("p",{staticClass:"title"},[e._v("这是401页面")])])}],r={name:"401"},o=r,i=(s("10a0"),s("2877")),u=Object(i["a"])(o,a,n,!1,null,"5b816e96",null);t["default"]=u.exports},c339:function(e,t,s){},cd96:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("p",{staticClass:"title"},[e._v("这是404页面")])])}],r={name:"404"},o=r,i=(s("5358"),s("2877")),u=Object(i["a"])(o,a,n,!1,null,"53ac3332",null);t["default"]=u.exports},eb3c:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:user:add",arg:"sys:user:add"}],on:{click:e.addUser}},[e._v("添加用户")]),s("a-divider"),s("a-drawer",{attrs:{width:"30%",visible:e.show.userInfo},on:{close:e.closeForm}},[s("a-form-model",{attrs:{model:e.form.userInfo,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[s("a-form-model-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id"}},[s("a-input",{attrs:{disabled:"",placeholder:"新建时自动生成"},model:{value:e.form.userInfo.id,callback:function(t){e.$set(e.form.userInfo,"id",t)},expression:"form.userInfo.id"}})],1),s("a-form-model-item",{attrs:{label:"用户名",prop:"username"}},[s("a-input",{attrs:{disabled:1===e.form.type,placeholder:"请输入用户名"},on:{blur:e.checkUsername},model:{value:e.form.userInfo.username,callback:function(t){e.$set(e.form.userInfo,"username",t)},expression:"form.userInfo.username"}})],1),s("a-form-model-item",{attrs:{label:"姓名",prop:"name"}},[s("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.userInfo.name,callback:function(t){e.$set(e.form.userInfo,"name",t)},expression:"form.userInfo.name"}})],1),s("a-form-model-item",{attrs:{label:"年龄",prop:"age"}},[s("a-input-number",{attrs:{placeholder:"请输入年龄"},model:{value:e.form.userInfo.age,callback:function(t){e.$set(e.form.userInfo,"age",t)},expression:"form.userInfo.age"}})],1),s("a-form-model-item",{attrs:{label:"邮箱",prop:"mail"}},[s("a-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.userInfo.mail,callback:function(t){e.$set(e.form.userInfo,"mail",t)},expression:"form.userInfo.mail"}})],1),s("a-form-model-item",{attrs:{label:"电话",prop:"phone"}},[s("a-input",{attrs:{placeholder:"请输入电话号码"},model:{value:e.form.userInfo.phone,callback:function(t){e.$set(e.form.userInfo,"phone",t)},expression:"form.userInfo.phone"}})],1),0===e.form.userInfo.role?s("span",[s("a-form-model-item",{attrs:{label:"权限",prop:"role"}},[s("a-radio-group",{attrs:{"default-value":"2"},model:{value:e.form.userInfo.role,callback:function(t){e.$set(e.form.userInfo,"role",t)},expression:"form.userInfo.role"}},[s("a-radio",{attrs:{value:"1"}},[e._v("科研管理员")]),s("a-radio",{attrs:{value:"2"}},[e._v("科研人员")])],1)],1)],1):e._e(),s("a-form-model-item",{attrs:{label:"角色",prop:"tags"}},[s("a-select",{attrs:{mode:"multiple",placeholder:"请选择角色"},model:{value:e.form.userInfo.rolesList,callback:function(t){e.$set(e.form.userInfo,"rolesList",t)},expression:"form.userInfo.rolesList"}},e._l(e.rolesOptions,(function(t){return s("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),s("div",{staticClass:"drawer-bottom-button"},[s("a-button",{style:{marginRight:"8px"},on:{click:e.closeForm}},[e._v("关闭")]),s("a-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1),s("a-modal",{attrs:{title:"重置密码",visible:e.show.resetPassword,width:"30%","ok-text":"确认","cancel-text":"取消"},on:{"update:visible":function(t){return e.$set(e.show,"resetPassword",t)},ok:e.submitResetPassword,cancel:e.closeResetPassword}},[s("a-form-model",{attrs:{model:e.form.resetPassword,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[s("a-form-model-item",{attrs:{label:"新密码",prop:"newPassword"}},[s("a-input-password",{model:{value:e.form.resetPassword.newPassword,callback:function(t){e.$set(e.form.resetPassword,"newPassword",t)},expression:"form.resetPassword.newPassword"}})],1),s("a-form-model-item",{attrs:{label:"重复密码",prop:"againPassword"}},[s("a-input-password",{model:{value:e.form.resetPassword.againPassword,callback:function(t){e.$set(e.form.resetPassword,"againPassword",t)},expression:"form.resetPassword.againPassword"}})],1)],1)],1),s("a-table",{attrs:{"data-source":e.dataSource,rowKey:"id",columns:e.columns,pagination:e.pagination},scopedSlots:e._u([{key:"tags",fn:function(t){return s("span",{},e._l(t,(function(t){return s("a-tag",{attrs:{rowKey:t.id,color:t.color}},[e._v(e._s(t.name))])})),1)}},{key:"status",fn:function(t){return s("span",{},[0===t?s("a-tag",{attrs:{color:"green"}},[e._v("正常")]):s("a-tag",{attrs:{color:"red"}},[e._v("锁定")])],1)}},{key:"action",fn:function(t,a){return s("span",{},[0!==a.role?s("span",[0===a.status?s("c-pop-button",{directives:[{name:"auth",rawName:"v-auth:sys:user:lock",arg:"sys:user:lock"}],attrs:{title:"确认要锁定吗",text:"锁定",type:"primary"},on:{click:function(t){return e.lockUser(a)}}}):e._e(),1===a.status?s("c-pop-button",{directives:[{name:"auth",rawName:"v-auth:sys:user:unlock",arg:"sys:user:unlock"}],attrs:{title:"确认要解锁吗",text:"解锁"},on:{click:function(t){return e.unlockUser(a)}}}):e._e(),s("a-divider",{attrs:{type:"vertical"}})],1):e._e(),0!==a.role?s("span",[s("c-pop-button",{directives:[{name:"auth",rawName:"v-auth:sys:user:del",arg:"sys:user:del"}],attrs:{title:"确认要删除吗",text:"删除",type:"danger"},on:{click:function(t){return e.removeUser(a)}}}),s("a-divider",{attrs:{type:"vertical"}})],1):e._e(),s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:user:edit",arg:"sys:user:edit"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editUser(a)}}},[e._v("编辑")]),s("a-divider",{attrs:{type:"vertical"}}),s("a-button",{directives:[{name:"auth",rawName:"v-auth:sys:user:reset",arg:"sys:user:reset"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showResetPassword(a)}}},[e._v("重置密码")])],1)}}])})],1)},n=[],r=(s("99af"),s("d81d"),s("4cff")),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-button",{style:e.color,attrs:{size:e.size,icon:e.icon,type:e.type,loading:e.loading},on:{click:e.onclick}},[e._v(e._s(e.text)+" ")])},i=[],u={name:"c-button",props:{color:{type:Object},click:{type:Function},text:{type:String,default:"按钮"},size:{type:String,default:"small"},icon:{type:String,default:""},type:{type:String,default:"primary"},loading:{type:Boolean,default:!1}},methods:{onclick:function(){this.$emit("click")}}},l=u,c=s("2877"),m=Object(c["a"])(l,o,i,!1,null,"18666ee7",null),d=m.exports,f=s("f1e3"),p=s("b0fb"),h={name:"user-list",components:{CButton:d,CPopButton:r["a"]},data:function(){return{rules:{username:[{required:!0,message:"请输入用户名",trigger:"change"},{min:2,max:16,message:"长度为2-16个字符",trigger:"change"},{whitespace:!0,message:"请输入用户名",trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"change"},{min:2,max:16,message:"长度为2-16个字符",trigger:"change"},{whitespace:!0,message:"请输入名称",trigger:"change"}],age:[{required:!0,message:"请输入年龄",trigger:"change"}],mail:[{required:!0,message:"请输入邮箱",trigger:"change"},{whitespace:!0,message:"请输入邮箱",trigger:"change"}],phone:[{required:!0,message:"请输入电话",trigger:"change"},{whitespace:!0,message:"请输入电话",trigger:"change"},{min:8,max:16,message:"长度为8-16个字符",trigger:"change"}],role:[{required:!0,message:"请选择角色",trigger:"change"}],tags:[],newPassword:[{required:!0,message:"请输入密码",trigger:"change"},{min:8,max:16,message:"长度为8-16个字符",trigger:"change"},{whitespace:!0,message:"请输入密码",trigger:"change"}],againPassword:[{required:!0,message:"请重复输入密码",trigger:"change"},{min:8,max:16,message:"长度为8-16个字符",trigger:"change"},{whitespace:!0,message:"请重复输入密码",trigger:"change"}]},columns:[{dataIndex:"username",key:"username",title:"用户名"},{dataIndex:"name",title:"姓名",key:"name"},{dataIndex:"age",title:"年龄",key:"age"},{dataIndex:"mail",title:"邮箱",key:"mail"},{dataIndex:"phone",title:"电话",key:"phone"},{dataIndex:"role",title:"角色",key:"role",scopedSlots:{customRender:"role"}},{dataIndex:"status",title:"状态",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],dataSource:[],pagination:Object(f["a"])(this.changeIndex,this.changeSize),count:0,labelCol:{span:5},wrapperCol:{span:16},rolesOptions:[],form:{type:0,userInfo:{id:"",username:"",name:"",age:"",mail:"",phone:"",role:1,status:null,rolesList:[]},resetPassword:{id:"",newPassword:"",againPassword:""}},show:{tags:!1,userInfo:!1,resetPassword:!1}}},activated:function(){this.getList()},mounted:function(){},methods:{changeIndex:function(e,t){var s={pageIndex:e,pageSize:t};this.getList(s)},changeSize:function(e,t){var s={pageIndex:e,pageSize:t};this.getList(s)},getRolesList:function(){var e=this;this.$http.get(p["a"].rolesList).then((function(t){200===t.status?null!==t.data&&(e.rolesOptions=t.data):e.$message.error(t.message)})).catch((function(e){console.error("出现错误:",e)}))},refreshData:function(){this.getList()},getList:function(e){var t=this;this.$http.get(p["a"].userListPage,{params:e}).then((function(e){200===e.status?null!==e.data&&(t.dataSource=e.data,t.pagination.total=e.page.dataCount,t.pagination.current=e.page.pageIndex+1):t.$message.error(e.message)})).catch((function(e){console.error("出现错误:",e)}))},lockUser:function(e){var t=this;this.$http.post("".concat(p["a"].lockUser,"/").concat(e.id)).then((function(e){200===e.status?(t.refreshData(),t.$message.success(e.message)):t.$message.error(e.message)})).catch((function(e){console.log("请求出现错误:",e)}))},unlockUser:function(e){var t=this;this.$http.post("".concat(p["a"].unlockUser,"/").concat(e.id)).then((function(e){200===e.status?(t.refreshData(),t.$message.success(e.message)):t.$message.error(e.message)})).catch((function(e){console.log("请求出现错误:",e)}))},removeUser:function(e){var t=this;this.$confirm({title:"确认操作?",cancelText:"取消",okText:"确定",onOk:function(){t.$http.post("".concat(p["a"].delUser,"/").concat(e.id)).then((function(e){200===e.status?(t.$message.success(e.message),t.this.refreshData()):t.$message.error(e.message)})).catch((function(e){console.log("请求出现错误:",e)}))}})},addUser:function(){this.form.type=0,this.getRolesList(),this.show.userInfo=!0},editUser:function(e){this.form.type=1,this.form.userInfo=e,this.form.userInfo.rolesList=e.rolesList.map((function(e){return e.id})),console.log(this.form.userInfo.rolesList),this.getRolesList(),this.show.userInfo=!0},closeForm:function(){this.form.userInfo={id:"",name:"",age:"",mail:"",role:null,status:null,tags:[]},this.show.userInfo=!1,this.refreshData()},submitForm:function(){var e=this,t=0===this.form.type?p["a"].addUser:p["a"].editUser;this.$http.post(t,this.form.userInfo).then((function(t){200===t.status?e.closeForm():e.$message.error(t.message)})).catch((function(e){console.error("出现错误:",e)}))},checkUsername:function(){var e=this,t=this.form.userInfo.username;this.$http.get("".concat(p["a"].checkUsername,"/").concat(t)).then((function(t){200===t.status?e.$message.success(t.message):e.$message.error(t.message)})).catch((function(e){console.error("出现错误:",e)}))},closeResetPassword:function(){this.show.resetPassword=!1,this.refreshData()},showResetPassword:function(e){this.form.resetPassword.id=e.id,this.show.resetPassword=!0},submitResetPassword:function(){var e=this;this.$http.post(p["a"].resetPassword,this.form.resetPassword).then((function(t){200===t.status?(e.$message.success(t.message),e.closeResetPassword()):e.$message.error(t.message)})).catch((function(e){console.log("请求出现错误:",e)}))}}},g=h,v=(s("51b1"),Object(c["a"])(g,a,n,!1,null,"eae53fcc",null));t["default"]=v.exports},f1e3:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));function a(e,t){var s={pageSize:10,pageSizeOptions:["10","20","30","40"],total:10,current:1,size:"middle",showSizeChanger:!0,buildOptionText:function(e){var t=e.value;return"".concat(t,"条/页")},onChange:null,onShowSizeChange:null};return s.onChange=e,s.onShowSizeChange=t,s}},f820:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"about"},[s("h1",[e._v("This is an about page")])])}],r=s("2877"),o={},i=Object(r["a"])(o,a,n,!1,null,null,null);t["default"]=i.exports},feca:function(e,t,s){var a={"./About.vue":"f820","./Home.vue":"bb51","./base/401.vue":"bf0e","./base/404.vue":"cd96","./base/Layout.vue":"0326","./base/Login.vue":"c896","./common/C-PageFooter.vue":"f176","./common/C-PageHeader.vue":"bc6f","./common/C-PageMenus.vue":"fe22","./manage/Index.vue":"8830","./manage/MenusList.vue":"19e2","./manage/RolesList.vue":"1ccf","./manage/UsersList.vue":"eb3c","./manage/Welcome.vue":"513a"};function n(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="feca"}}]);
//# sourceMappingURL=chunk-f0a5a1ae.c3cb8006.js.map